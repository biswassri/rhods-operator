name: Run prometheus unit tests
on:
  pull_request:
    paths:
      - 'config/monitoring/prometheus/**'
      - 'tests/prometheus_unit_tests/**'
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Setup Go
      uses: actions/setup-go@v4
      with:
        go-version-file: go.mod
    
    - name: Install Promtool
      run: |
        go install github.com/prometheus/prometheus/cmd/promtool@latest
        export PATH=$PATH:$(go env GOPATH)/bin
        promtool --version
    
    - name: Run prometheus-unit-tests
      run : make test-alerts
